<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Qu·∫£n l√Ω T·ª´ v·ª±ng</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f4f7f9; color: #333; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #667eea; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: 600; margin-bottom: 5px; }
        input[type="text"], textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; }
        button { padding: 12px 25px; border: none; border-radius: 8px; background: #667eea; color: white; font-size: 16px; font-weight: bold; cursor: pointer; transition: background 0.3s; }
        button:hover { background: #5a66d4; }
        #message { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; display: none; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border: 1px solid #ddd; text-align: left; }
        th { background-color: #667eea; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .action-buttons button { padding: 5px 10px; font-size: 14px; margin-right: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ†Ô∏è Qu·∫£n l√Ω T·ª´ v·ª±ng & C√¢u</h1>
        <form id="word-form">
            <div class="form-group">
                <label for="hanzi">Ch·ªØ H√°n:</label>
                <input type="text" id="hanzi" required>
            </div>
            <div class="form-group">
                <label for="hanviet">H√°n Vi·ªát:</label>
                <input type="text" id="hanviet">
            </div>
            <div class="form-group">
                <label for="words">T·ª´ v·ª±ng (JSON):</label>
                <textarea id="words" rows="5"></textarea>
            </div>
            <div class="form-group">
                <label for="sentences">V√≠ d·ª• c√¢u (JSON):</label>
                <textarea id="sentences" rows="5"></textarea>
            </div>
            <button type="submit">Th√™m / S·ª≠a</button>
        </form>
        <div id="message"></div>
        
        <h2>Danh s√°ch t·ª´ v·ª±ng hi·ªán t·∫°i</h2>
        <table id="vocab-table">
            <thead>
                <tr>
                    <th>Ch·ªØ H√°n</th>
                    <th>H√°n Vi·ªát</th>
                    <th>H√†nh ƒë·ªông</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <script>
        const form = document.getElementById('word-form');
        const messageDiv = document.getElementById('message');
        const vocabTableBody = document.querySelector('#vocab-table tbody');

        async function loadData() {
            try {
                const response = await fetch('tuvung.json');
                if (!response.ok) throw new Error('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ v·ª±ng.');
                const data = await response.json();
                renderTable(data);
                return data;
            } catch (error) {
                showMessage('L·ªói: ' + error.message, 'error');
                return null;
            }
        }

        function renderTable(data) {
            vocabTableBody.innerHTML = '';
            for (const hanzi in data) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${hanzi}</td>
                    <td>${data[hanzi].hanviet}</td>
                    <td class="action-buttons">
                        <button onclick="editEntry('${hanzi}')">S·ª≠a</button>
                        <button onclick="deleteEntry('${hanzi}')">X√≥a</button>
                    </td>
                `;
                vocabTableBody.appendChild(row);
            }
        }

        async function editEntry(hanzi) {
            const data = await loadData();
            if (!data || !data[hanzi]) return;
            
            document.getElementById('hanzi').value = hanzi;
            document.getElementById('hanviet').value = data[hanzi].hanviet || '';
            document.getElementById('words').value = JSON.stringify(data[hanzi].words || [], null, 2);
            document.getElementById('sentences').value = JSON.stringify(data[hanzi].sentences || [], null, 2);
            document.getElementById('hanzi').readOnly = true; // NgƒÉn ng∆∞·ªùi d√πng s·ª≠a ch·ªØ H√°n
        }

        async function deleteEntry(hanzi) {
            if (!confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a m·ª•c n√†y kh√¥ng?')) return;
            // V·∫´n c·∫ßn backend ƒë·ªÉ th·ª±c hi·ªán vi·ªác x√≥a
            showMessage('Ch·ª©c nƒÉng x√≥a y√™u c·∫ßu backend.', 'error');
        }

        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            const hanzi = document.getElementById('hanzi').value;
            const hanviet = document.getElementById('hanviet').value;
            const words = JSON.parse(document.getElementById('words').value || '[]');
            const sentences = JSON.parse(document.getElementById('sentences').value || '[]');

            const newData = {
                hanviet: hanviet,
                words: words,
                sentences: sentences
            };

            // B∆∞·ªõc n√†y ch·ªâ l√† m√¥ ph·ªèng, tr√™n th·ª±c t·∫ø ph·∫£i g·ª≠i d·ªØ li·ªáu t·ªõi backend
            showMessage('ƒê√£ g·ª≠i d·ªØ li·ªáu, nh∆∞ng kh√¥ng th·ªÉ l∆∞u v√¨ thi·∫øu backend.', 'error');
            console.log('D·ªØ li·ªáu c·∫ßn g·ª≠i:', { [hanzi]: newData });
        });

        function showMessage(msg, type) {
            messageDiv.textContent = msg;
            messageDiv.className = '';
            messageDiv.classList.add(type);
            messageDiv.style.display = 'block';
        }

        // T·∫£i d·ªØ li·ªáu khi trang ƒë∆∞·ª£c m·ªü
        loadData();
    </script>
</body>
</html>
